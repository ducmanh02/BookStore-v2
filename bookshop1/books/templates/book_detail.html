{% extends 'baseBook.html' %}

{% block content %}
  <div class="container my-4">
    <div class="row">
      <div class="col-lg-4">
        <img class="img-fluid rounded mb-4" src="{{ book.image_url }}" alt="{{ book.title }}">
      </div>
      <div class="col-lg-8">
        <h1 class="mt-4">{{ book.title }}</h1>
        <p><strong>Author:</strong> {{ book.author.name }}</p>
        <p><strong>Genre:</strong> {{ book.genre.name }}</p>
        <p><strong>Description:</strong></p>
        <p>{{ book.description }}</p>
        <p><strong>Price:</strong> {{ book.price }}</p>
        <p><strong>Stock:</strong> {{ book.stock }}</p>
        <h3> <strong> Rating:</strong> {{avg_rating}} </h3>
              <div class="col-md-6">
                <h3>Reviews</h3>
                {% if reviews %}
                  {% for review in reviews %}
                  {% comment %} <p class="card-text">Username: {{ review.username }}</p> {% endcomment %}
                    <div class="card">
                      <div class="card-body">
                        <h5 class="card-title">{{ review.title }}</h5>
                        <p class="card-text">{{ review.content }}</p>
                        <p class="card-text">Rating: {{ review.rating }}/5</p>
                      </div>
                    <p>
                      <td><a href="{% url 'reviews:edit_review' review.id %}" class="btn btn-secondary">Edit</a></td>
                      <td><a href="{% url 'reviews:delete_review' review.id %}" class="btn btn-danger">Delete</a></td>
                      <td><a href="{% url 'cart:add_to_cart' book.id%} "> add to cart </a> </td>
                    </p>
                    </div>
                    
                  {% endfor %}
                {% else %}
                  <p>No reviews yet.</p>
                {% endif %}
                <td><a href=" {% url 'reviews:create_review' book.pk %}" class="btn btn-danger">Add a review</a></td>
              
               
              </div>
            </div>
          </div>
        {% endblock %}
        